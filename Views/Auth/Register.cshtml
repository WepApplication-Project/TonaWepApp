@model TonaWebApp.Models.User

@{
    ViewData["Title"] = "Register";
}

@section CSS
{

}

<div class="main-container">
    <div class="img-container"><img
            src="https://cdn.discordapp.com/attachments/1212717114238967838/1212717188096589915/2115483_273995-P5W2BD-727.jpg?ex=65f2d9e4&is=65e064e4&hm=6c335eae3f1cb83dc795fed1f92429d2a381e857ecbeb9863cc04a149976d94a&">
    </div>
    <div class="wrapper">
        <div class="section-container">
            <div class="logo-container">
                <img src="https://cdn.discordapp.com/attachments/1212717114238967838/1212717153686655006/tuna.png?ex=65f2d9dc&is=65e064dc&hm=986fc5efbc87b07f09d041abeb8bcd4841610843301f86c54d4dfbc3fe414319&"
                    alt="TonaIcon">
                <h1>TONA</h1>
            </div>
            <p>Register</p>
            <div class="form-container">
                <form asp-controller="Auth" asp-action="Register" method="post">
                    <div class="input-box">
                        <i class='bx bx-envelope'></i>
                        <input asp-for="Email" type="email" placeholder="Email" required onchange="clearMsg('email')">
                    </div>
                    <div class="wrong-submit" id="email">This email is already in used</div>
                    <div class="input-box">
                        <i class='bx bx-lock-alt'></i>
                        <input asp-for="Password" name="Password" type="password" placeholder="Password" required>
                    </div>

                    <div class="name-container">
                            <div class="input-box" id="firstname">
                                <i class='bx bx-user'></i>
                                <input asp-for="FirstName" name="FirstName" type="text" placeholder="First Name"
                                    required>
                            </div>
                            <div class="input-box" id="lastname">
                                <input asp-for="LastName" name="LastName" type="text" placeholder="Last Name" required>
                            </div>
                        
                    </div>


                    <div class="input-box">
                        <i class='bx bx-phone'></i>
                        <input asp-for="Phone" type="tel" placeholder="Phone Number" required pattern="[0-9]{3}[0-9]{3}[0-9]{4}" onchange="clearMsg('phone')">
                    </div>
                    <div class="wrong-submit" id="phone">This phone number is already in used</div>
                    <div class="sign-btn">
                        <button type="submit">Register</button>
                    </div>
                </form>
            </div>
        </div>
        <div class="sign-link">
            <hr>
            <p>already have account?
                <a href="/auth/login">login</a>
            </p>
        </div>
    </div>
</div>

<script>

    function clearMsg(id){
        let obj = document.getElementById(id)
        obj.style.display= "none";
    };

    let result = "@ViewBag.result";
    let email = document.getElementById("email");
    let phone = document.getElementById("phone");
    if (result == "Email already exists."){
        email.style.display = "flex";
        email.value = "";
        result = "";
    }
    else if (result == "Phone already exists."){
        phone.style.display = "flex";
        phone.value = "";
        result = "";
    }
    
</script>
