@model TonaWebApp.Models.Board

@{
    Layout = "_LayoutNavBar";
}
<div class=create-container>
    <form id="createPostForm" asp-controller="Board" asp-action="CreateBoard">
        <h1 class="topic-header">Create Board</h1>
        <label for="name">Topic:</label>
        <input asp-for="Name" type="text" id="name" name="name" placeholder="Enter your meeting topic here" required><br>

        <label for="description">Description:</label>
        <textarea asp-for="Description" id="description" name="description" placeholder="Enter detail of the meeting here"
            required></textarea><br>

        <label for="tag">Tag:</label>
        <select asp-for="Tag" id="tag" name="tag" required>
            <option value="love">Love</option>
            <option value="food">Food</option>
            <option value="study">Study</option>
            <option value="travel">Travel</option>
            <option value="sport">Sport</option>
            <option value="game">Game</option>
        </select><br>

        <label for="location">Location:</label>
        <input asp-for="Place" type="text" id="location" name="Place" placeholder="Enter the location you want to meet each other"
            required>
        <br>

        <div class="col-2">
            <div class="max-member">
                <label for="max_member">Max Members:</label>
                <input asp-for="MaxMember" type="number" id="max_member" name="MaxMember" min="1" placeholder="Enter Number > 1" required><br>
            </div>

            <div class="start">
                <label for="start_time">Board Open Time:</label>
                <input asp-for="StartTime" type="datetime-local" id="start_time" name="StartTime" onchange="validateTime()" required><br>
            </div>

            <div class="end">
                <label for="end_time">Board Closed Time:</label>
                <input asp-for="EndTime" type="datetime-local" id="end_time" name="EndTime" required onchange="validateTime()"><br>
            </div>

            <div class="meet">
                <label for="end_time">Meeting Date:</label>
                <input asp-for="MeetingTime" type="datetime-local" id="meeting_time" name="MeetingTime" required onchange="validateTime()"><br>
            </div>
        </div>


        
        <button class="create-btn" type="submit">Create Post</button>
    </form>
</div>

<script>
  function validateTime() {
      const startTime = document.getElementById("start_time").value;
      const endTime = document.getElementById("end_time").value;
      const meetingTime = document.getElementById("meeting_time").value;

      // Get current time
      const currentDate = new Date();

      // Convert to Date objects for comparison
      const startDate = new Date(startTime);
      const endDate = new Date(endTime);
      const meetingDate = new Date(meetingTime);

      // Check if times are greater than current time
      if (startDate < currentDate || endDate <= currentDate || meetingDate < currentDate) {
        let errorMessage = "";
        if (startDate < currentDate) {
          errorMessage += "Board Opened Time must be after the current time. ";
          document.getElementById("start_time").value = "";
        }
        if (endDate <= currentDate) {
          errorMessage += "Board Closed Time must be after the current time.";
          document.getElementById("end_time").value = "";
        }
        if (meetingDate <= currentDate) {
          errorMessage += "Meeting Time must be after the current time.";
            document.getElementById("meeting_time").value = "";
        }
        if (meetingDate <= endDate) {
          errorMessage += "Meeting Time must be after Board Closed Time.";
            document.getElementById("meeting_time").value = "";
        }
        if (endDate <= startDate){
            errorMessage += "Board Closed Time must more than Board Opened Time.";
            document.getElementById("end_time").value = "";
        }
        alert(errorMessage);
        event.preventDefault();
      }
    }
</script>

